# [880. Decoded String at Index](https://leetcode.com/problems/decoded-string-at-index/)

An encoded string `S` is given.  To find and write the *decoded* string to a tape, the encoded string is read **one character at a time** and the following steps are taken:

- If the character read is a letter, that letter is written onto the tape.
- If the character read is a digit (say `d`), the entire current tape is repeatedly written `d-1` more times in total.

Now for some encoded string `S`, and an index `K`, find and return the `K`-th letter (1 indexed) in the decoded string.

**Example 1:**

```
Input: S = "leet2code3", K = 10
Output: "o"
Explanation:
The decoded string is "leetleetcodeleetleetcodeleetleetcode".
The 10th letter in the string is "o".
```

**Example 2:**

```
Input: S = "ha22", K = 5
Output: "h"
Explanation:
The decoded string is "hahahaha".  The 5th letter is "h".
```

**Example 3:**

```
Input: S = "a2345678999999999999999", K = 1
Output: "a"
Explanation:
The decoded string is "a" repeated 8301530446056247680 times.  The 1st letter is "a".
```



**Note:**

1. `2 <= S.length <= 100`
2. `S` will only contain lowercase letters and digits `2` through `9`.
3. `S` starts with a letter.
4. `1 <= K <= 10^9`
5. The decoded string is guaranteed to have less than `2^63` letters.

-----

**é¢˜ç›®**ï¼šå¯¹äºç¼–ç åçš„å­—ç¬¦ä¸²ï¼Œè¿”å›è§£ç å­—ç¬¦ä¸²åœ¨ç¬¬`K`ä¸ªä½ç½®å¯¹åº”çš„å­—ç¬¦ã€‚

**æ€è·??*ï¼šå‚è§å¤§ç¥[lee215](https://leetcode.com/problems/decoded-string-at-index/discuss/156747/C++Python-O(N)-Time-O(1)-Space)çš„è§£æã€‚æˆ‘ä»¬å¹¶ä¸éœ€è¦çœŸæ­£çš„å»è§£ç å­—ç¬¦ä¸²ï¼ˆè¿™æ ·åšä¹Ÿé€šè¿‡ä¸äº†ğŸ˜‚ï¼‰ã€‚æˆ‘ä»¬æ„é€ ä¸€ä¸ªè®¡æ•°å™¨`N`ï¼Œè®°å½•ç¼–ç åå­—ç¬¦ä¸²çš„å‰`i`ä¸ªå­—ç¬¦å¯¹åº”çš„è§£ç åå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å½“`N>=K`æ—¶ï¼Œæˆ‘ä»¬çŸ¥é“ç¬¬`K`ä¸ªå­—ç¬¦ï¼ˆç¼–ç åï¼‰è‚¯å®šå•Šä¸ªåœ¨å‰é¢çš„iä¸ªå­—ç¬¦ï¼ˆè§£ç åï¼‰ä¸­ã€‚åå‘åˆ¤æ–­ï¼Œå¦‚æœç¬¬`i`ä¸ªå­—ç¬¦æ˜¯æ•°å­—ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“è®¡æ•°å™¨`N = ? * S[i]`ï¼Œå»æ‰é‡å¤çš„éƒ¨åˆ†å¾—åˆ°`N /= S[i]`ï¼Œ`K`å˜ä¸ºäº†`K %= N`ï¼›å¦‚æœç¬¬`i`ä¸ªå­—ç¬¦æ˜¯å­—ç¬¦ï¼Œåˆ¤æ–­æ­¤æ—¶çš„è®¡æ•°å™¨`N`æ˜¯å¦æ»¡è¶³`K%N==0`ï¼Œå¦‚æœä¸æ»¡è¶³ï¼Œè·³è¿‡å­—ç¬¦`S[i]`ï¼Œè®¡æ•°å™¨å‡ä¸€ã€‚

[**å·¥ç¨‹ä»£çhttps://github.com/shenkh/leetcodesft/leetcode)

```cpp
class Solution {
public:
    string decodeAtIndex(string S, int K) {
        long N = 0, i = 0;
        for(i = 0; N < K; ++i){
            N = isdigit(S[i]) ? N * (S[i]-'0') : N + 1;
        }

        while(i--){
            if(isdigit(S[i])){
                N /= S[i] - '0';
                K %= N;
            }
            else{
                if(K % N == 0)
                    return string(1, S[i]);
                else
                    --N;
            }
        }

        return "";
    }
};
```

